<!DOCTYPE html>
<html lang="en">

{{>fragments/html_header}}

<body class="home-page">

    <div class="logo-wrapper">
        <img src="/css/gg purple logo.png" alt="GameGram Logo">
        <h1 class="brand-title">GameGram</h1>
        <img src="/css/gg purple logo.png" alt="GameGram Logo">
    </div>

    {{>fragments/navbar}}

    <div class="friends-container" style="display: flex; flex-wrap: wrap; gap: 20px;">
  {{#users}}
  <div class="friend-card" style="border: 1px solid #ccc; padding: 10px; width: 200px; flex: 0 0 auto; text-align: center;">
      <!-- User info -->
      <img src="{{profileImagePath}}" alt="User avatar" style="width: 80px; height: 80px; border-radius: 50%;">
      <h3>{{firstName}} {{lastName}}</h3>
      <div class="last-active">Last active: {{lastActiveDate}}</div>

      <!-- Recent Game Info -->
      {{#recentGame}}
      <p><strong>Most Recent Game:</strong> {{title}}</p>
      <p><strong>Rating:</strong> {{rating}}</p>
      <p><strong>Review:</strong> {{review}}</p>
      {{/recentGame}}
      {{^recentGame}}
      <p>No recent game played.</p>
      {{/recentGame}}

      <!-- Follow / Unfollow Form -->
      <form action="/follow" method="post" style="margin-top: 10px;">
    <input type="hidden" name="followedId" value="{{userId}}">
    <input type="hidden" name="isFollow" value="{{isFollowed}}">
    <button type="submit" style="
        padding: 8px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        color: white;
        font-weight: bold;
        background-color: {{#isFollowed}}#ff4d4d{{/isFollowed}}{{^isFollowed}}#4CAF50{{/isFollowed}};
    ">
        {{#isFollowed}}Unfollow{{/isFollowed}}
        {{^isFollowed}}Follow{{/isFollowed}}
    </button>
</form>

  </div>
  {{/users}}
</div>

<!-- Top 10 Most Popular Games Globally -->
<h2 style="margin-top: 40px; text-align: center;">Top 10 Global Games</h2>

<div class="global-games-container" 
     style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 20px;">

    {{#mostPopGames}}
    <div class="game-card" 
         style="border: 1px solid #ccc; padding: 15px; width: 260px; border-radius: 10px;">

        <h3 style="margin: 0; text-align: center;">{{name}}</h3>
        <p style="text-align: center; font-style: italic;">{{genre}}</p>

        {{#platforms}}
        <p><strong>Platforms:</strong> {{platformName}}</p>
        <p><strong>Publishers:</strong> {{publisher}}</p>
        <p><strong>Earliest Release:</strong> {{year}}</p>

        <p><strong>Global Sales:</strong> {{globalSales}} million</p>
        {{/platforms}}

    </div>
    {{/mostPopGames}}

    {{^mostPopGames}}
    <p style="text-align:center;">No popular games found.</p>
    {{/mostPopGames}}
</div>




</body>
</html>
